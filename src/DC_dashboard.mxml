<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   xmlns:mx="library://ns.adobe.com/flex/mx" 
			    
			   xmlns:depot1="services.depot1.*"
			   xmlns:depot31="services.depot31.*"		   		   
			   
			   creationComplete="application1_creationCompleteHandler(event)"
			   
			   xmlns:panelTabs="panelTabs.*" 
			   width="100%"  xmlns:utils="utils.*"
			   pageTitle="Battery Demand Tool" 
			   minHeight="800" height="800" xmlns:wrapperis="services.wrapperis.*" xmlns:depot4="services.depot4.*" xmlns:depot311="services.depot31.*">
	
	<!-- creationComplete="initAll(event)" !-->
	
	<s:layout>
		<s:VerticalLayout horizontalAlign="center" 
						  paddingBottom="20" gap="5" paddingTop="5"/>
	</s:layout>
	<fx:Declarations>	
		
		<depot1:Depot1 id="depot1" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)" 
					   showBusyCursor="true"/>		
		<depot31:Depot31 id="depot31" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)" showBusyCursor="true"/>
		
		<s:CallResponder id="createNewWorkingScenarioResult" result="createNewWorkingScenarioResult_resultHandler(event)"
						 fault="createNewWorkingScenarioResult_faultHandler(event)"/>		
		<s:CallResponder id="deleteAllScenariosResult" result="deleteAllScenariosResult_resultHandler(event)" 
						 fault="deleteAllScenariosResult_faultHandler(event)"/>
		<s:CallResponder id="indicatorsNamesList" result="indicatorsNamesList_resultHandler(event)" /> 
		
		<s:RadioButtonGroup id="viewingModeGroup"/>

		<s:CallResponder id="insertExportIdsResult" result="insertExportIdsResult_resultHandler(event)"
						  fault="insertExportIdsResult_faultHandler(event)"/>
		<depot4:Depot4 id="depot4" fault="Alert.show(event.fault.faultString + '\n' + event.fault.faultDetail)" showBusyCursor="true"/>
		
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[			
			import controls.FlowManager;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.events.IndexChangedEvent;
			import mx.rpc.events.FaultEvent;
			import mx.rpc.events.ResultEvent;
			
			import services.depot1.*;
			import services.depot21.Depot21;
			
			import utils.IDgenerator;
			import utils.helper;			
			private var dataServiceNames:Depot1;
			private var dataServiceData:Depot21;
			private var dataServiceUpdate:Depot31;
			
			public  var masterTab:FlowManager;
			
			private var workingScenarioID:int;
//			public static var baselineScenarioID:int = 10001; 
			private var currTime:String;
			protected var IDgen:IDgenerator = new IDgenerator();
									
			protected function initAll(evt:FlexEvent):void {				
				trace("application creationComplete part. start initAll");
				this.tabai.createDeferredContent();				
				this.startApp(evt);
			}		
			
			protected function application1_creationCompleteHandler(event:FlexEvent):void
			{
				this.currentState = "landingState";
				hlp = new helper();			
				//this.currentStateLabel.text = "Current State: " + this.currentState;				
			}
			
			public var flagApplicationStarted:int = 0;
			protected function startApp(event:FlexEvent):void
			{
				flagApplicationStarted = flagApplicationStarted + 1;
				if (flagApplicationStarted == 1) {
					trace("starting init Depot1, Depot21, Depot3");
					//this.pathLabel.text = "Init";						
					this.dataServiceNames = new Depot1();
					this.dataServiceData = new Depot21();
					this.dataServiceUpdate = new Depot31();			
					
					this.workingScenarioID = this.IDgen.generateID();	
					this.currTime = this.IDgen.generateTimeStamp();
					
					cleanOldScenarios(); // clean DB from unneccesary scenarios
					this.addEventListener("dbCleaned", initScenarioDB);				
					
					this.addEventListener("CNTRY_CHANGED", digestUpdate);				
					this.addEventListener("cntryChecked",   digestUpdate);
					this.addEventListener("cntryUnChecked", digestUpdate);				
					this.addEventListener("updateClusterType", digestUpdate);				
					this.addEventListener("NewScenarioUpdated", refreshDeviceBase);				
					this.addEventListener("deviceBaseWritten",  refreshMarketSize);
					
					this.addEventListener("scenarioResetRequested", resetScenario);
					this.addEventListener("scenarioResetDone", refreshAllTabs);
					
					this.addEventListener("changesMadeInScenario", recordState);
					
					this.addEventListener("pathChanged", digestPathChange);
					
					this.addEventListener("init", createNext);
					this.addEventListener("cTree", createNext);
					this.addEventListener("tabA", createNext);
					this.addEventListener("tabB", createNext);
					this.addEventListener("tabC", createNext);
					this.addEventListener("tabD", createNext);				
					this.addEventListener("tabF", createNext);
					this.addEventListener("tabE", createNext);
					
					this.addEventListener("tabaiCreated", finalTouches);					
					this.addEventListener("indicatorsLoaded", fillIndicatorNames);						
						
					//this.addEventListener("stateChanged", changeState); // further get state from navControl					
					this.addEventListener("viewingModeChanged", manageViewModeChanged);					
					//events form countryTree
					this.addEventListener("refreshData_C",  refreshData_C);					
					this.addEventListener("updateCharts_C", updateCharts_C);
					this.addEventListener("refreshDeviceID_C", refreshDeviceID_C);					
					// -- end --
					this.addEventListener("stateClicked", switchSate);
					
					if (!this.masterTab) {	masterTab = new FlowManager(); };					
					this.masterTab.setStateSpacePos(1);
					//updateStateSpaceLabel();				
				} else if (flagApplicationStarted == 2)	{				
					this.dispatchEvent(new Event("init", true))
				};
			}			
			
			public function refreshDeviceID_C(evt:Event):void {
				this.panelTabE61.dropdownlist1_changeHandler(null);
			};
			
			public function switchSate(evt:Event):void {
				var t:String = this.navigatorBox2.currentStateSelected;		
				var viewOnly:Boolean = this.masterTab.isViewingMode();
				switch (t) {
					case "lab0": // home page
						this.currentState = "landingState";
						this.cntryTree.currentState = "default";
						this.btnNext.enabled = true;
						break;
					case "lab1": // tab BQ
						if (!viewOnly) {							
							this.currentState = "BQList";
							this.cntryTree.currentState = "default";
							this.navigatorBox2.setStateVector([1, 1, 1, 0, 0]);
							this.btnNext.enabled = true;
						};
						break;
					case "lab2":
						this.currentState = "geoList";
						this.cntryTree.currentState = "default";
						this.btnNext.enabled = true;
						break;
					case "lab3": // some tabs become active, need refresh of data
						this.currentState = (viewOnly ? "viewingState" : "scenarioState");
						this.tabai.selectedIndex = this.selActiveTab;
						this.btnNext.enabled = true;
						//this.cntryTree.currentState = "default";
						tabai_changeHandler(null);
						break;
					case "lab4": // some tabs become active, need refresh of data
						this.currentState = (viewOnly ? "viewingState" : "scenarioState");
						this.tabai.selectedIndex = 4;
						this.btnNext.enabled = false;
						//this.cntryTree.currentState = "slicing";
						tabai_changeHandler(null);
						break;
					default:
						break;				
				}				
			};
			
			public function refreshData_C(evt:Event):void {
				this.panelTabE61.refreshData(evt);
				this.panelTabE61.exoIndi_clickHandler(null);				
			};
			
			public function updateCharts_C(evt:Event):void {
				this.panelTabE61.updateCharts(evt);
			};
			
			public function finalTouches(evt:Event):void {
				this.masterTab.notifyAll();
				this.masterTab.setIndicatorNamesAll();
				this.masterTab.enableGrids(this.masterTab.getPathFlags());		
				
				this.tabai.selectedIndex = 1; //this.selActiveTab;				
				this.tabai.enabled = true;				
				this.cursorManager.removeBusyCursor();				
				//this.panelTabA2.refreshData(null);
				this.panelTabB3.refreshData(null);
				
				this.updateLabelState();				
				Alert.show("Base data has been populated", "Info");
			}
			
			public function updateLabelState ():void {			
				var tmp:String = "viewingOnly";							
				 
				this.panelTabA2.currentState = tmp;				
				this.panelTabB3.currentState = tmp;				
				this.panelTabD5.currentState = tmp;				
				this.panelTabF51.currentState = tmp;				
				
				var z:Array = this.masterTab.getPathFlags();
				tmp = ((this.viewMode == "viewDataOnly") ? "viewingOnly" : "default");
				for (var i:int = 0; i < z.length; i++) { if (z[i] == 1) break; };
				
				switch (i) {
					case 0:
						this.panelTabA2.currentState = tmp;
						break;
					case 1:
						this.panelTabB3.currentState = tmp;
						break;
					case 3:
						this.panelTabD5.currentState = tmp;
						break;
					case 5:
						this.panelTabF51.currentState = tmp;
						break;					
				};							
			}			
			
			public function fillIndicatorNames(evt:Event):void {				
				this.masterTab.recordIndicatorNames(this.panelTabA2.getFullIndiList());
				//this.masterTab.setIndicatorNamesAll();
			}
			
			public function updateStateSpaceLabel():void {
				//this.stateSpaceLabel.text = this.masterTab.getStateSpaceName();
			}
			
			[bindable] private var currState:int;
			
			private function manageViewModeChanged(evt:Event):void {
				/*var crntSt:String = this.panelTabPath.getViewingState();
				if (crntSt == "viewingState") {
					// set state to viewing one
					this.currentState = "viewingState";
				} else {
					// set to edit state
					this.currentState = "scenarioState";
				};		
				this.dispatchEvent(new Event("pathChanged", true));*/				
			}
			
			private function digestStateChange(ind:int):void {
				switch (ind) {
					case 0:
						//this.tabai.selectedIndex = 0;
						break;
					case 1:
						//this.tabai.selectedIndex = 0;					
						break;
					case 2:						
						for (var i:int = 0; i < this.pathFlags.length; i++) {
							if (this.pathFlags[i] == 1) break;
						};
						if (i == 5) this.tabai.selectedIndex = i - 1;
						else if (i == 3) this.tabai.selectedIndex = i;	
						else this.tabai.selectedIndex = i + 1;
						
						break;
					case 3:
						this.tabai.selectedIndex = 5;
						break;
				};
			}
			
			protected function refreshAllTabs(evt:Event):void {
				this.panelTabA2.refreshData(null);
				this.panelTabB3.refreshData(null);		
				if (this.panelTabC4.getWorkingScenario() == 0) 
					this.panelTabC4.setWorkingScenario(this.workingScenarioID, false);
				//this.panelTabC4.rewriteDeviceBase();				
				this.panelTabD5.refreshData(null);				
				this.panelTabF51.refreshData(null);
				this.panelTabE61.refreshData(null);
				
				this.cntryTree.resetScenarioCountries();
			}

			[bindable] public var changeMadeInScenario:Boolean = false;
			protected function recordState(evt:Event):void {			
				this.saveSomeData(evt);
				changeMadeInScenario = true;				
				masterTab.setStateSpacePos(4);				
				//update CTree with new data
				this.cntryTree.setScenarioCountries(this.masterTab.getScenarioCountryListData());				
				//this.updateStateSpaceLabel();
				//or record cTree values here
			}
			
			private function saveSomeData(evt:Event):void {
				trace("in saveSomeData");
				var k:int = 0;
				k = k + 1;				
				masterTab.saveScenarioCountries();				
			}
			
			[bindable] private var firstDeviceBase:int = 0;
			protected function refreshDeviceBase(evt:Event):void {
				this.firstDeviceBase = this.firstDeviceBase + 1;				 
				this.panelTabC4.rewriteDeviceBase();				
			}
			
			protected function refreshMarketSize(evt:Event):void {								 
				this.panelTabD5.rewriteMarketSize();				
			}	
			
			
			public function resetScenario(evt:Event):void {
				this.changeMadeInScenario = false;
				this.masterTab.resetScenarioCountries(); // remove data from list	
				//this.cntryTree.resetScenarioCountries(); //update Tree for new data
				createNewWorkingScenarioResult.token = depot31.createNewWorkingScenario(workingScenarioID);
			}
			
			[bindable] private var atLeastOneCntrySelected:Boolean = false;
			[bindable] private var cntryData:ArrayCollection;
			
			public function digestUpdate(event:Event):void {			
				cntryData = this.cntryTree.getDataList();				
				var regData:ArrayCollection = this.cntryTree.getRegionsDataList();
				var uCluster:Boolean = this.cntryTree.getUseCluster();			
				
				this.masterTab.setDataList(cntryData, regData, uCluster);			
								
				switch (this.currentState) {
					case "geoList":
						this.atLeastOneCntrySelected = (cntryData.length > 0);
						this.btnNext.enabled = this.atLeastOneCntrySelected;
						break;
					default:
						this.btnNext.enabled = true;
						break;
				}						
				
				if (this.masterTab.getStateSpacePos() == 1) {					
						this.masterTab.setStateSpacePos(2);
						//this.updateStateSpaceLabel();
				};
				
			}		

			[bindable] private var selPath:String = "";
			[bindable] public static var isStart:int = 0;			
			[bindable] public var selPathObj:String;
			[bindable] public var selPathObjLabel:String;
			[bindable] public var selActiveTab:int;
			
			[bindable] public var isBQSelected:Boolean = false;
			public function digestPathChange(event:Event):void {
				this.isBQSelected = true;
				this.btnNext.enabled = true;
				this.selPathObj = (event) ? String(event.target.selPath) : "none";
				this.selPathObjLabel = (event.target.hasOwnProperty("selPathLabel")) ? event.target.selPathLabel : "none";				
				/*if (this.viewMode == "viewDataOnly") {
					this geoListLabel.text = "Step 2: Please select your geographies of interest on the left and click “Next” to continue.";					
				} else if (this.viewMode == "runScenarios") {
					this.geoListLabel.text = "Step 3: Please select your geographies of interest on the left and click “Next” to continue.";
				};*/
				
				// 1 instead of zero because need to show 2nd graph
				selActiveTab = ((event.target.hasOwnProperty("selTabIndex")) ? event.target.selTabIndex : 1);				
				//if (isStart  < 2) { isStart = isStart + 1;	};
				isStart = isStart + 1;
				
				if (this.changeMadeInScenario) {
					Alert.show("Changes were made in Working Scenario. Do you want to reset?", 
						"Info", Alert.OK | Alert.CANCEL, this, alertListener, null, Alert.OK);
				} else {					
					//this.pathLabel.text = "Selected Path: " + this.selPathObj;				
					pathFlags = this.masterTab.registerPath(this.selPathObj, isStart);
					this.masterTab.registerViewingMode(this.viewMode);
				};				
			}

			private var pathFlags:Array;
			private function alertListener(eventObj:CloseEvent):void {				
				if (eventObj.detail==Alert.OK) {
					//this.pathLabel.text = "Selected Path: " + this.selPathObj;					
					pathFlags = this.masterTab.registerPath(this.selPathObj, isStart);					
					this.colorLabelsOnPath(pathFlags);					
					this.dispatchEvent(new Event("scenarioResetRequested", true));			
				} else {
					//this.panelTabPath.pathTypes.selectedValue = selPath;
				};
			}
			
			private function colorLabelsOnPath(arr:Array):void {				
				var col1:String = '0x83d342'; //for active input 83d342
				var col2:String = '0xd1d1d1'; // grey
				var prop:String = 'backgroundColor'; // 'backgroundColor'; color
				
				var col3:String = '0x3e9a3e'; 
								
				if (this.currentState == "scenarioState") {					
					/*(arr[0] == 1) ? labA.setStyle(prop, col1) : labA.setStyle(prop, col2); 
					(arr[1] == 1) ? labB.setStyle(prop, col1) : labB.setStyle(prop, col2);
					//(arr[2] == 1) ? labC.setStyle(prop, col1) : labC.setStyle(prop, col2);
					(arr[3] == 1) ? labD.setStyle(prop, col1) : labD.setStyle(prop, col2);
					(arr[4] == 1) ? labE.setStyle(prop, col3) : labE.setStyle(prop, col3);
					(arr[5] == 1) ? labF.setStyle(prop, col1) : labF.setStyle(prop, col2);*/
				} else {					
					/*labA.setStyle(prop, col2); 
					labB.setStyle(prop, col2);					
					labD.setStyle(prop, col2);
					labE.setStyle(prop, col2);
					labF.setStyle(prop, col2);*/
				};
				
				if (this.currentState == "scenarioState") {				
				/*	this.labAt.visible = (arr[0] == 1); 
					this.labBt.visible = (arr[1] == 1);
	//				this.labCt.visible = (arr[2] == 1);
					this.labDt.visible = (arr[3] == 1);
					this.labEt.visible = true; // = (arr[4] == 1)
					this.labFt.visible = (arr[5] == 1);*/			
				};
				//this.invalidateDisplayList();
			}
			
			public function cleanOldScenarios():void {
				//this.statusLabel.text = "cleaning DB...";
				deleteAllScenariosResult.token = depot31.deleteAllScenarios();		
			}
			
			public function initScenarioDB(evt:Event):void {
				createNewWorkingScenarioResult.token = depot31.createNewWorkingScenario(workingScenarioID);
			}		
			
			[bindable] private var scenarioCreatedFlag:Boolean = false;
			private var startas:int = 0;
			protected function createNewWorkingScenarioResult_resultHandler(event:ResultEvent):void
			{ 
				scenarioCreatedFlag = true;
				startas = startas + 1;
				if (startas > 1) dispatchEvent(new Event("scenarioResetDone", true));
				//this.statusLabel.text = "new scenario created: " + this.workingScenarioID + "  ";
			}		

			protected function createNewWorkingScenarioResult_faultHandler(event:FaultEvent):void
			{ 
				scenarioCreatedFlag = false;	
				dispatchEvent(new Event("scenarioCreationFailed", true));
				//this.statusLabel.text = "new scenario not created"
			}	
			
			protected function taba11_creationCompleteHandler(event:FlexEvent):void
			{			
				this.panelTabA2.setWorkingScenario(this.workingScenarioID, false);
				
				this.panelTabA2.dataServiceNames = this.dataServiceNames;
				this.panelTabA2.dataServiceData =  this.dataServiceData;
				this.panelTabA2.dataServiceUpdate = this.dataServiceUpdate;
				this.panelTabA2.initNames();				
				
				this.masterTab.addTab(this.panelTabA2, 0);
				this.panelTabA2.setFlowManagerRef(this.masterTab);
				//this.panelTabPath.enablePaths(true);
				
				this.tabai.enabled = false;
								
				this.cursorManager.setBusyCursor();
				
				this.dispatchEvent(new Event("tabA", true));				
				trace("creation complete of tab A1");				
			}
			
			protected function tabb11_creationCompleteHandler(event:FlexEvent):void
			{				
				this.panelTabB3.setWorkingScenario(this.workingScenarioID, false);								
				this.panelTabB3.dataServiceNames = this.dataServiceNames;
				this.panelTabB3.dataServiceData = this.dataServiceData;
				this.panelTabB3.dataServiceUpdate = this.dataServiceUpdate;
				
				this.panelTabB3.initNames();								
				this.masterTab.addTab(this.panelTabB3, 1);
				this.panelTabB3.setFlowManagerRef(this.masterTab);
				
				this.dispatchEvent(new Event("tabB", true));
				trace("creation complete of tab B1");
			}

			protected function tabc11_creationCompleteHandler(event:FlexEvent):void
			{				
				this.panelTabC4.setWorkingScenario(this.workingScenarioID, false);
				this.panelTabC4.dataServiceData = this.dataServiceData;				
				this.panelTabC4.dataServiceNames = this.dataServiceNames;	
				this.panelTabC4.dataServiceUpdate = this.dataServiceUpdate;
				
				this.panelTabC4.initNames();				
				this.masterTab.addTab(this.panelTabC4, 2);
				
				this.panelTabC4.rewriteDeviceBase();
				
				this.dispatchEvent(new Event("tabC", true));
				trace("creation complete of tab C4");
			}

			protected function tabd11_creationCompleteHandler(event:FlexEvent):void
			{				
				this.panelTabD5.setWorkingScenario(this.workingScenarioID, false);				
				this.panelTabD5.dataServiceNames = this.dataServiceNames;
				this.panelTabD5.dataServiceData = this.dataServiceData;
				this.panelTabD5.dataServiceUpdate = this.dataServiceUpdate;
				
				this.panelTabD5.initNames();							
				this.masterTab.addTab(this.panelTabD5, 3);	
				this.panelTabD5.setFlowManagerRef(this.masterTab);
				
				this.dispatchEvent(new Event("tabD", true));
				trace("creation complete of tab D1");
			}

			protected function deleteAllScenariosResult_resultHandler(event:ResultEvent):void
			{
			     //this.statusLabel.text = "data cleaned from DB";
				 this.dispatchEvent(new Event("dbCleaned"));
				 
			}
			
			[bindable] private var startOnce:uint = 0;
			protected function cntryTreeInit():void
			{
				startOnce = startOnce + 1;
				if (startOnce == 1) {
					this.cntryTree.dataServiceNames = this.dataServiceNames;
					this.cntryTree.initNames();
				};				
				//this.dispatchEvent(new Event("cTree", true));
				trace("creation complete of cTree");				
			}
					
			protected function tabf511_creationCompleteHandler(event:FlexEvent):void  {			
				this.panelTabF51.setWorkingScenario(this.workingScenarioID, false);
				
				this.panelTabF51.dataServiceNames = this.dataServiceNames;
				this.panelTabF51.dataServiceData =  this.dataServiceData;
				this.panelTabF51.dataServiceUpdate = this.dataServiceUpdate;
				
				this.panelTabF51.initNames();			
				
				this.masterTab.addTab(this.panelTabF51, 4);
				this.panelTabF51.setFlowManagerRef(this.masterTab);
				
				this.dispatchEvent(new Event("tabF", true));
				trace("creation complete of tab F5");
								
				this.tabaiCreationComplete = true;
				this.dispatchEvent(new Event("tabaiCreated", true));			
				// here we get the dataList from Master
			}

			protected function tabe11_creationCompleteHandler(event:FlexEvent):void
			{				
				this.panelTabE61.setWorkingScenario(this.workingScenarioID, false);				
				this.panelTabE61.dataServiceNames = this.dataServiceNames;
				this.panelTabE61.dataServiceData = this.dataServiceData;
				
				this.panelTabE61.initNames();								
				this.masterTab.addTab(this.panelTabE61, 5);			
				
				this.panelTabE61.setMasterTab(this.masterTab);
				
				this.dispatchEvent(new Event("tabE", true));
				trace("creation complete of tab E61");				
			}			
			
			protected function createNext(evt:Event):void {
				var c:String = evt.type;
				switch (c) {
					case 'init':
						//this.pathLabel.text = "Loading Module: cTree";
						this.cntryTreeInit();
						break;
					case 'cTree':
						//this.pathLabel.text = "Loading Module: A2";
						this.nc_A2.createDeferredContent();				
						break;
					case 'tabA':
						//this.pathLabel.text = "Loading Module: B3";					
						this.nc_B3.createDeferredContent();						
						break;
					case 'tabB':
						//this.pathLabel.text = "Loading Module: C4";
						this.termpBrd.createDeferredContent();
						//here should go code for deviceBase write procedure
						break;
					case 'tabC':
						//this.pathLabel.text = "Loading Module: D5";
						this.nc_D5.createDeferredContent();						
						break;
					case 'tabD':
						//this.pathLabel.text = "Loading Module: E61";
						this.nc_E61.createDeferredContent();												
						break;
					case 'tabE':
						//this.pathLabel.text = "Loading Module: F51";
						this.nc_F51.createDeferredContent();						
						break;					
					case 'tabF':				
						//this.pathLabel.text = "Loading Module: N00";
						//this.nc_00.createDeferredContent();
						//this.panelTabPath.enablePaths(false);
						//this.pathLabel.text = "Content Loaded";						
						if (this.panelTabA2) this.panelTabA2.enabled = true;
						this.panelTabB3.enabled = true;
						//this.panelTabC4.enabled = false;					
						this.panelTabE61.enabled = true;
						this.panelTabF51.enabled = true;
						//this.panelTabPath.enabled = false;
					break;
				}				
			}			

			protected function panelTabPath_creationCompleteHandler(event:FlexEvent):void
			{
				//this.panelTabPath.enablePaths(false);
				trace("creation complete of tab pathSelections");
				//this.panelTabPath.enabled == (this.currentState == "scenarioState");
			}

			[bindable] private var tabaiCreationComplete:Boolean = false;
			protected function tabai_creationCompleteHandler(event:FlexEvent):void
			{
				trace("tabai creation complete");	
				this.masterTab.enableGrids([0, 0, 0, 0, 0, 0]);
				//if (this.currentState == "viewingState") this.tabai.selectedIndex = 1;
			}			

			protected function deleteAllScenariosResult_faultHandler(event:FaultEvent):void
			{
				Alert.show("could not clean old scenarios from DB...", "Error");
			}				
			
			[bindable] private var viewMode:String = ""; //"viewDataOnly";
			[bindable] private var labelTop:String = ""; 
			[bindable] private var labelBottom:String = "";
			[bindable] private var labelDemand:String = "";
			[bindable] private var geoLabel:String = "";			
			
			protected function modeSwitch_clickHandler(event:Event):void
			{
				this.viewMode = String(this.viewingModeGroup.selection.value);
				if (!this.masterTab) masterTab = new FlowManager();
				this.masterTab.registerViewingMode(this.viewMode);				
				this.dispatchEvent(new Event("pathChanged", true));
				
				if (this.viewMode == "runScenarios") {
					this.geoLabel    = "Step 3: Please select your geographies of interest on the left and click “Next” to continue.";
					this.labelTop    = "Step 4: Click the dropdown below to adjust chosen indicator";
					this.labelBottom = "Step 5: Make changes to the data by editing right within the table below. You may also input shocks into the data by using the drop down menus. Once data has been adjusted, click “Update Chart” to view changes. To remove changes, click “Reset Scenario"; 
					this.labelDemand = "Step 6: select battery parameters";
				} else {
					this.geoLabel    = "Step 2: Please select your geographies of interest on the left and click “Next” to continue.";
					this.labelTop    = "";
					this.labelBottom = "";
					this.labelDemand = "Step 3: select battery parameters";
				};			
			}			

			public function updateLabels():void {
				this.panelTabA2.labelTop.text  = this.labelTop;
				this.panelTabA2.labelBot.text  = this.labelBottom;
				this.panelTabB3.labelTop.text  = this.labelTop;
				this.panelTabB3.labelBot.text  = this.labelBottom;
				this.panelTabD5.labelTop.text  = this.labelTop;
				this.panelTabD5.labelBot.text  = this.labelBottom;
				this.panelTabF51.labelTop.text = this.labelTop;
				this.panelTabF51.labelBot.text = this.labelBottom;
				
				//this.cntryTree.labelDemand.text = this.labelDemand;					
			}				
			
			protected function btnNext_clickHandler(event:MouseEvent):void		
			{				
				if (this.viewMode == "") {
					this.viewMode = String(this.viewingModeGroup.selection.value);
					modeSwitch_clickHandler(null);
				};
				//var tmp:String;								
				switch (this.currentState) {
					case "landingState" :						
						if (viewMode == "viewDataOnly") {							
							this.currentState =  "geoList";
							this.geoListLabel.text = this.geoLabel;
							this.navigatorBox2.setStateVector([1, 0, 1, 0, 0]);
							this.startApp(null);
							if (this.flagApplicationStarted < 2) this.dispatchEvent(new Event("init", true));
							this.btnNext.enabled = this.atLeastOneCntrySelected;
						} else {
							this.currentState =  "BQList"
							this.navigatorBox2.setStateVector([1, 1, 0, 0, 0]);
							this.startApp(null);
						};						
						break;
					case "BQList" :							
						this.currentState = "geoList";						
						this.navigatorBox2.setStateVector([1, 1, 1, 0, 0]);
						this.startApp(null);
						this.btnNext.enabled = this.atLeastOneCntrySelected;
						
						this.geoListLabel.text = this.geoLabel;						
						if (this.BQselection.selPath == "") this.BQselection.radiobutton1_clickHandler(null);
						break;
					case "geoList" :				
						if (atLeastOneCntrySelected) {
							//this.btnNext.enabled = true;
							if (this.viewMode == "viewDataOnly") {							
								this.digestUpdate(null);														
								currentState = "viewingState";
								this.navigatorBox2.setStateVector([1, 0, 1, 1, 1]);							
								if (!tabaiCreationComplete) {									
									this.tabai.createDeferredContent();									
								} else {									
									this.masterTab.enableGrids([0, 0, 0, 0, 0, 0]);
									this.tabai.selectedIndex = 1;
								};								
							} else {														
								this.digestUpdate(null);
								currentState = "scenarioState";
								this.navigatorBox2.setStateVector([1, 1, 1, 1, 1]);								
								if (!tabaiCreationComplete) this.tabai.createDeferredContent();					
								else     					this.tabai.selectedIndex = this.selActiveTab;											
							};							
							this.masterTab.notifyAll();	// used for default selection of IndisDropDownMenus								
							if (tabaiCreationComplete) {									
								tabai_changeHandler(null);
								this.updateLabelState();
								updateLabels();								
							};
						};
						break;					
					case "viewingState" :	
						// set this into initialization stage of these
						this.cntryTree.setLabelDemand(this.labelDemand);
						this.navigatorBox2.setStateVector([1, 0, 1, 1, 1]);
						if (this.tabaiCreationComplete) { this.tabai.selectedIndex = 4; };	
						this.btnNext.enabled = false;					
						break;					
					case "scenarioState" :
						this.cntryTree.setLabelDemand(this.labelDemand);
						this.navigatorBox2.setStateVector([1, 1, 1, 1, 1]);
						this.tabai.selectedIndex = 4;
						this.btnNext.enabled = false;			
						break;					
				};			
				//this.currentStateLabel.text = "Current State: " + this.currentState;
				//this.invalidateDisplayList();			
			}

			protected function btnBack_clickHandler(event:MouseEvent):void
			{
				switch (this.currentState) {
					case "landingState" :
						//null
						break;
					case "BQList" :
						this.currentState = "landingState";						
						break;
					case "geoList" :
						if (viewMode == "viewDataOnly") {
							currentState =  "landingState";							
						} else {
							currentState = "BQList";
							this.navigatorBox2.setStateVector([1, 1, 0, 0, 0]);
						};
						this.btnNext.enabled = true;
						break;					
					case "viewingState" :
						if (this.tabai.selectedIndex == 4) {
							this.tabai.selectedIndex = 1 //this.selActiveTab;
						} else {
							this.currentState = "geoList";
							this.navigatorBox2.setStateVector([1, 0, 1, 0, 0]);
						};
						this.btnNext.enabled = true;
						break;					
					case "scenarioState" :
						if (this.tabai.selectedIndex == 4) {
							this.tabai.selectedIndex = this.selActiveTab;
							this.navigatorBox2.setStateVector([1, 1, 1, 1, 1]);
						} else {
							currentState = "geoList";
							this.navigatorBox2.setStateVector([1, 1, 1, 0, 0]);							
						};
						this.btnNext.enabled = true;					
						break;					
				}				
			}			
			
			public function getTheData(evt:Event):void {
				trace("init names inside panel A1");				
				indicatorsNamesList.token = this.depot1.getIndicatorNames();			
			}

			private function filterByBQ(item:Object):Boolean {			
				var fl:Boolean = true;				
				(item.isOutputIndicator) ? fl = false : fl = true;				
				return fl;
			}	
			
			[bindable] public var indiListBQ:ArrayCollection;			
			protected function indicatorsNamesList_resultHandler(event:ResultEvent):void
			{			
				indiListBQ = this.indicatorsNamesList.lastResult as ArrayCollection
				indiListBQ.filterFunction = filterByBQ;
				indiListBQ.refresh();
			}

			protected function tabai_changeHandler(event:IndexChangedEvent):void
			{
				var f:int = this.tabai.selectedIndex;
				switch (f) {
					case 0:
						//tab A - macro
						this.panelTabA2.refreshData(null);						
						this.cntryTree.currentState = "default";
						break;
					case 1:
						//tab B - HHs
						this.panelTabB3.refreshData(null);
						this.cntryTree.currentState = "default";
						break;
					case 2:
						//tab D - Market Size
						this.panelTabD5.refreshData(null);
						this.cntryTree.currentState = "default";
						break;
					case 3:
						//tab F - Other, Power Shares
						this.panelTabF51.refreshData(null);
						this.cntryTree.currentState = "default";
						break;
					case 4:
						//tab E - Demand
						this.panelTabE61.refreshData(null);
						this.panelTabE61.exoIndi_clickHandler(null);
						this.cntryTree.currentState = "slicing";
						break;		
				};				
				//Alert.show("Selected Tab:" + f,"info"); 
			}

			protected function cntryTree_creationCompleteHandler(event:FlexEvent):void
			{
				this.cntryTree.setMasterTab(masterTab);
			}

			private var hlp:helper;
			private var exportTypeID:int = 0; 
			protected function button_clickHandler(event:MouseEvent):void
			{				
				var countryIDs:Array = this.masterTab.getDataList().source;				
				var tmp:String = this.hlp.formStringFromIDs2(countryIDs);	
				var indicatorID:int;				
				// 0 - for exoVars, 1 - fro deviceBAse, 2 - for demand;
				
				switch (this.tabai.selectedIndex) {
					case 0: // HH
						indicatorID = this.panelTabA2.selectedIndi;
						exportTypeID = 0;
						break;
					case 1:// ownership
						indicatorID = this.panelTabB3.selectedIndi;
						exportTypeID = 1;
						break;
					case 2: // market size
						indicatorID = this.panelTabD5.selectedIndi;
						exportTypeID = 1;
						break;
					case 3: // dev. spec.
						indicatorID = this.panelTabF51.selectedIndi;
						exportTypeID = 1;
						break;
					case 4: // demand
						indicatorID = this.masterTab.selDemandIndi;
						exportTypeID = 3;
						break;
					default :						
						break;				
				};							
				
				insertExportIdsResult.token = depot4.insertExportIds(this.workingScenarioID, tmp, indicatorID);					
			}			

			protected function insertExportIdsResult_resultHandler(event:ResultEvent):void
			{
				this.exportToExcel();				
			}

			protected function insertExportIdsResult_faultHandler(event:FaultEvent):void
			{
				Alert.show("could not write countryList to DB. data will not be epxorted", "Error");
			}
			
			//public var address:String = "192.168.44.200";
			public var address:String = "213.197.173.50";
			protected function exportToExcel():void 	{			
				var request:URLRequest = new URLRequest();
				request.url = "http://" 
					+  address      + "/Consulting/Duracell/version2/calcs2/exportDataToExcel_DC.php?"					 
					+ "scenarioID=" + this.workingScenarioID
					+ "&typeID="    + this.exportTypeID // 2 - for demand; 1 for deviceBase; 0 for exo vars;
					+ "&aggLevel="  + this.masterTab.selDeviceAggLevel
					+ "&tmp="       + String(Math.round(Math.random()*1000));
				navigateToURL(request, "_blank");
			}

		]]>
	</fx:Script>
		
	<s:states>
		<s:State name="landingState" />
		<s:State name="BQList" />
		<s:State name="geoList" />	
		<s:State name="viewingState" />
		<s:State name="scenarioState" />		
	</s:states>
	
	<!-- <s:BorderContainer width="992" height="15" fontFamily="Verdana" 
					   horizontalCenter="0" top="0" borderVisible="false" id="a">
		<s:layout>
			<s:HorizontalLayout verticalAlign="justify" />
		</s:layout>
		
		<s:Label text="Battery Demand Analysis Tool. v.05-28-6pm" height="100%" width="40%" 
				 fontFamily="Arial" fontSize="9"/>
		<s:Label text="Selected Path" height="15" verticalAlign="middle"
				 id="pathLabel" width="30%" fontFamily="Arial" fontSize="9"/>
		<s:Label text="info bar" id="statusLabel" width="30%" textAlign="right" height="100%"
				 fontFamily="Arial" fontSize="9"/>		
	</s:BorderContainer>	!-->
	
	<s:BorderContainer id="playBorder" borderWeight="2" borderColor="#A7A7A7"
					   borderAlpha="0.5" borderVisible="false" height="35"
					   width="1012">
		<s:layout>
			<s:BasicLayout/>
		</s:layout>
		<s:Button label="Next &gt;&gt;" width="110" height="25" id="btnNext" 
				  click="btnNext_clickHandler(event)"				   
				  fontWeight="bold" fontFamily="Arial" fontSize="12"  right="5" 
				  verticalCenter="0"/>
		<s:Button label="&lt;&lt; Back" width="110" height="25" 
				  verticalCenter="0" id="btnBack"  click="btnBack_clickHandler(event)"  
				  fontWeight="bold" fontFamily="Arial" fontSize="12"
				  enabled.landingState="false"  right="130"/>
		<!-- <s:Label  text="emptyLabel" id="currentStateLabel" verticalCenter="0" 
				 fontFamily="Verdana"  fontSize="12"/> !-->
		<s:Label id="topTitle" verticalCenter="0" 			
				fontFamily="Arial"  fontWeight="bold" 
				fontSize="13"				 
				text = "Duracell Device Based Consumption Model – Analysis Tool v.1.18"/> 
		<s:Button id="button" click="button_clickHandler(event)"				   
				  label ="export scenario data" fontSize="11" 
				  includeIn="scenarioState,viewingState"
				   height.viewingState="25" y.scenarioState="10" verticalCenter.viewingState="0" x.scenarioState="446" horizontalCenter.viewingState="0"/>
	</s:BorderContainer>

	<s:BorderContainer height="30" excludeFrom="landingState" 
					   borderVisible="false" width="1012" >	
		<utils:navigatorLabels id="navigatorBox2" width="100%" height="100%"
							    horizontalCenter="0" verticalCenter="0">
		</utils:navigatorLabels>
	</s:BorderContainer>	
	
	<s:BorderContainer includeIn="landingState" width="992" height="600" borderVisible="false">
		<s:layout>
			<s:BasicLayout/>
		</s:layout>
		<s:RadioButton y="209" value="viewDataOnly"
					   groupName="viewingModeGroup" 
					   selected="true" click="modeSwitch_clickHandler(event)" 
					   fontFamily="Arial" fontSize="14" color="#000000" fontWeight="bold" label="View base case data" left="200"/>
		<s:RadioButton y="271" label="Run scenarios" value="runScenarios" 
					   groupName="viewingModeGroup"
					   click="modeSwitch_clickHandler(event)" fontFamily="Arial" fontSize="14" color="#000000" fontWeight="bold" left="200"/>
		<s:Label y="18" text="Home" color="#F27C21" fontWeight="bold" fontFamily="Arial" fontSize="18" horizontalCenter="-331"/>
		
		<mx:Text width="667" text="Welcome to the Duracell Device-Based Consumption Model Data Tool. This tool, developed by Euromonitor International, allows for immediate access to battery powered device data (in units) &amp; forecasted battery demand (in cells) across 53 markets globally. Forecasted years include 2006-2021. In addition to viewing the base forecasts, this tool can also be used to manipulate key inputs (e.g. macroeconomic factors, device demand, etc.) in order to run various scenarios."
				 		 y="44" height="102" horizontalCenter="0" fontSize="14" fontFamily="Arial" color="#656565"/>
		
		<mx:Text width="671" text="NOTE: The Device Based Consumption Model (DBCM) research was completed in FY2012"
				 y="143" height="25" horizontalCenter="0" fontSize="14" fontFamily="Arial" color="#656565"/>
				
		<mx:Text width="671" text="Step 1: Indicate below how you intend to use the tool:" 
				 y="177" height="29" horizontalCenter="-1" fontSize="14" fontFamily="Arial" color="#007E9D"/>		
		<mx:Text width="569" text="Choose this selection to look at the data output from the base case scenario. Output includes battery powered device data (in units), and battery demand forecast (in cells)." 
				 y="231" height="45" fontFamily="Arial" fontSize="12" fontStyle="italic" color="#656565" left="246"/>
		<mx:Text width="557" text="Click this selection to follow three simple steps to scenario plan:&#13;&#13;1) Select business question to address&#13;2) Select geographies of interest&#13;3) Select inputs for modification" y="295" height="94" fontFamily="Arial" fontSize="12" fontStyle="italic" color="#656565" left="246"/>
		<s:RadioButton includeIn="landingState" label="Final Data File (XLS)" y="429" left="246" enabled="false" color="#656565"/>
		<s:RadioButton label="Executive Summary (PPT)" y="457" left="246" enabled="false" color="#656565"/>
		<s:RadioButton label="Full Report (PPT)" y="483" left="246" enabled="false" color="#656565"/>
		<s:Label text="Get final project files" fontWeight="bold" fontSize="14" left="200" top="398" color="#000000"/>
	</s:BorderContainer>

<s:BorderContainer width="992" height="100%" borderVisible="false" 
				   excludeFrom="landingState" itemCreationPolicy="immediate">	
	<s:layout>
		<s:VerticalLayout horizontalAlign="center" paddingTop="10"  gap="0"/>
	</s:layout>


	<s:BorderContainer id="mainBC" width="992" horizontalCenter="0" top="25" 
					   borderVisible="false" 
					 excludeFrom="landingState, BQList" height="100%">	
		<s:layout>
			<s:HorizontalLayout gap="10" paddingLeft="0" paddingRight="0" paddingTop="0" paddingBottom="0"/>	
		</s:layout>
		
		<s:BorderContainer width="225" height="100%" horizontalCenter="0" top="" borderVisible="false"
						   creationPolicy="auto"  width.scenarioState="250" width.geoList="228">
			<s:layout>
				<s:VerticalLayout/>
			</s:layout>
			<s:layout.geoList>
				<s:HorizontalLayout/>
			</s:layout.geoList>
			<utils:CTree id="cntryTree" width="100%" height="100%" horizontalCenter="0" 
						 verticalCenter="0" creationComplete="cntryTree_creationCompleteHandler(event)" >
			</utils:CTree>		
			
		</s:BorderContainer>
		
		<s:BorderContainer width="770" height="100%" left="0"
						   includeIn="viewingState, scenarioState"						    
						   borderColor="#8E8E8E" borderWeight="0" borderVisible="false" width.scenarioState="776">
			<s:layout>
				<s:VerticalLayout gap="0"/>
			</s:layout>

			<!-- <s:BorderContainer width="100%" height="15" borderVisible="false">
				<s:layout>
					<s:HorizontalLayout verticalAlign="contentJustify" gap="0"/>
				</s:layout>
				<s:Label id="lab0t" visible.viewingState="false" visible="false"
						 verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  width="109" fontFamily="Verdana" fontSize="10" fontWeight="normal" text="DATA INPUT HERE" includeIn="scenarioState"/>
				<s:Label id="labAt" visible.viewingState="false" visible="false"
						 verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="10" width="109" fontWeight="normal" text="DATA INPUT HERE" includeIn="scenarioState"/>
				<s:Label id="labBt" visible.viewingState="false" visible="false"
						 verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="10" width="109" fontWeight="normal" text="DATA INPUT HERE" includeIn="scenarioState"/>
    			<s:Label id="labCt" visible="false" verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="10" width="109" fontWeight="normal" text="DATA INPUT HERE"/>
				<s:Label id="labDt" visible.viewingState="false" visible="false"
						 verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="10" width="109" fontWeight="normal" text="DATA INPUT HERE" includeIn="scenarioState"/>
				<s:Label id="labFt" visible.viewingState="false" visible="false"
						 verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="10" width="109" fontWeight="normal" text="DATA INPUT HERE" includeIn="scenarioState"/>
				<s:Label id="labEt" visible.viewingState="false" visible="false"
						 verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="10" width="109" fontWeight="normal" text="RESULTS" includeIn="scenarioState"/>
			</s:BorderContainer> !-->
			
<!--			<s:BorderContainer width="100%" height="10" id="someCols" backgroundColor="#D1D1D1" color="#D1D1D1" borderVisible="false" color.scenarioState="#000000" backgroundColor.scenarioState="#F7F7F7">
				<s:layout>
					<s:HorizontalLayout verticalAlign="contentJustify" gap="0"/>
				</s:layout>
				<s:Label id="lab0"   verticalCenter="0"  height="100%" verticalAlign="middle" textAlign="center"  width="109" fontFamily="Verdana" fontSize="11" paddingLeft="0" paddingTop="0"  fontWeight="normal" chromeColor="#D1D1D1" includeIn="scenarioState"/>
				<s:Label id="labA" verticalCenter="0" height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="11" width="109" fontWeight="normal" chromeColor="#3E9A3E"/>
				<s:Label id="labB"   verticalCenter="0"  height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="11" width="109" fontWeight="normal"/>
	
				<s:Label id="labD" verticalCenter="0"  height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="11" width="109" fontWeight="normal"/>
				<s:Label id="labF"  verticalCenter="0"  height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="11" width="109" fontWeight="normal"/>
				<s:Label id="labE" verticalCenter="0"  height="100%" verticalAlign="middle" textAlign="center"  fontFamily="Verdana" fontSize="11" width="109" fontWeight="normal"/>
			</s:BorderContainer> !-->
			
			<mx:TabNavigator id="tabai" height="100%" fontFamily="Arial"						
							 creationPolicy="none" creationComplete="tabai_creationCompleteHandler(event)" 
							 fontSize="11" dropShadowVisible="false"
							 verticalCenter="0" horizontalCenter="0" 
							 textAlign="left" chromeColor="#F8F8F8"
							 backgroundAlpha="1.0" contentBackgroundAlpha="0.95" tabWidth="153"
							 change="tabai_changeHandler(event)"						  
							 borderVisible="false" borderColor="#8E8E8E">	
				
				<s:NavigatorContent id="nc_A2" label="Macro Environment"
									width="100%" height="100%" 
									creationPolicy="none">
					<s:layout.viewingState>
						<s:VerticalLayout/>
					</s:layout.viewingState>
					<panelTabs:tabA2 id="panelTabA2" width="100%" height="100%"  enabled="true"
									 creationComplete="taba11_creationCompleteHandler(event)"  top="0" left="0"
									  >
					</panelTabs:tabA2>
				</s:NavigatorContent>
				
				<s:NavigatorContent id="nc_B3" label="Ownership And Usage" width="100%" height="100%" 
									creationPolicy="none">
					<panelTabs:tabB3 id="panelTabB3" width="100%" height="100%" enabled="true"
									 creationComplete="tabb11_creationCompleteHandler(event)" top="0" left="0"
									  >					
					</panelTabs:tabB3> 
				</s:NavigatorContent>
				
				<s:NavigatorContent id="nc_D5" label="Device Annual Market Size" width="100%" height="100%" 
									creationPolicy="none">
					<panelTabs:tabD5 id="panelTabD5" creationComplete="tabd11_creationCompleteHandler(event)"
									 enabled="true" top="0" width="100%" height="100%" left="0">					
					</panelTabs:tabD5>
				</s:NavigatorContent>
				
				
				<s:NavigatorContent id="nc_F51" label="Device Specifications" width="100%" height="100%" creationPolicy="none">
					<panelTabs:tabF51 id="panelTabF51" width="100%" 
									  height="100%" enabled="true"
									  creationComplete="tabf511_creationCompleteHandler(event)"  top="0" left="0">
					</panelTabs:tabF51>
				</s:NavigatorContent>
				
				<s:NavigatorContent id="nc_E61" label="Battery Demand" width="100%" height="100%" creationPolicy="none">
					<panelTabs:tabE61 id="panelTabE61" enabled="false" 
									  creationComplete="tabe11_creationCompleteHandler(event)" top="0" width="100%" height="100%" left="0">					
					</panelTabs:tabE61> 					
				</s:NavigatorContent> 
				
			</mx:TabNavigator>
		</s:BorderContainer>
		<s:BorderContainer height="100%" borderVisible="false">
			<mx:Text id="geoListLabel" text="Step 2: Please select your geographies of interest on the left and click “Next” to continue." 
					 includeIn="geoList"  color="#007E9D" verticalCenter="-115" horizontalCenter="-10" height="120" fontSize="14"/>
			<!-- &#13;You may also select regions or clusters (developed, developing, or emerging) by changing the grouping below. !-->
		</s:BorderContainer>

		<s:BorderContainer id="termpBrd" creationPolicy="none" borderVisible="false">
			<panelTabs:tabC4 id = "panelTabC4" width="0%" height="0%"  top="0" left="0"
							 enabled="false" visible="false"
							 creationComplete="tabc11_creationCompleteHandler(event)">					
			</panelTabs:tabC4> 
		</s:BorderContainer>		
	</s:BorderContainer>
	
	<s:BorderContainer borderVisible="false" width="90%" height="100%" includeIn="BQList">
		<panelTabs:tabPathSelection id="BQselection" width="95%" height="100%"
									horizontalCenter="0" visible="true" top="10">
		</panelTabs:tabPathSelection>
	</s:BorderContainer>	
</s:BorderContainer>
	
</s:Application>

